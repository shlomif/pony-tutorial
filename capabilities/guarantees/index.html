<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Guarantees - Pony Tutorial</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/highlight.css" rel="stylesheet">
  <link href="../../css/theme_extra.css" rel="stylesheet">

  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/highlight.pack.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Pony Tutorial</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
            <li class="toctree-l1 ">
                <a class="" href="../..">Home</a>
                
            </li>
        

    
        
            <span>Getting started</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../..">Welcome!</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../getting-started/what-you-need-to-start/">What you need to start</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../getting-started/installation/">Installation</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../getting-started/helloworld/">Helloworld</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../getting-started/how-it-works/">How it works</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../getting-started/whitespace/">Whitespace</a>
                    
                </li>
            
        

    
        
            <span>Types</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/static-vs-dynamic/">Static vs dynamic</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/classes/">Classes</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/primitives/">Primitives</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/actors/">Actors</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/traits-and-interfaces/">Traits and interfaces</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/type-aliases/">Type aliases</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/type-expressions/">Type expressions</a>
                    
                </li>
            
        

    
        
            <span>Capabilities</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../introduction/">Introduction</a>
                    
                </li>
            
                <li class="toctree-l2 current">
                    <a class="current" href="./">Guarantees</a>
                    
                        <ul>
                        
                            <li class="toctree-l3"><a href="#what-is-denied">What is denied</a></li>
                            
                        
                            <li class="toctree-l3"><a href="#mutable-capabilities">Mutable capabilities</a></li>
                            
                        
                            <li class="toctree-l3"><a href="#immutable-capabilities">Immutable capabilities</a></li>
                            
                        
                            <li class="toctree-l3"><a href="#opaque-capabilities">Opaque capabilities</a></li>
                            
                        
                        </ul>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../aliasing/">Aliasing</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../combining-capabilities/">Combining capabilities</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../passing-and-sharing/">Passing and sharing</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../capability-subtyping/">Capability subtyping</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../arrow-types/">Arrow types</a>
                    
                </li>
            
        

    
        
            <span>Expressions</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../expressions/variables/">Variables</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../expressions/infix-ops/">Infix ops</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../expressions/control-structures/">Control structures</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../expressions/methods/">Methods</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../expressions/exceptions/">Exceptions</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../expressions/sugar/">Sugar</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../expressions/object-literals/">Object literals</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../expressions/partial-application/">Partial application</a>
                    
                </li>
            
        

    
        
            <span>Actors</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../actors/behaviours/">Behaviours</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../actors/capabilities/">Capabilities</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../actors/recover-and-consume/">recover and consume</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../actors/arrow-types/">Arrow types</a>
                    
                </li>
            
        

    
        
            <span>Packages</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../packages/package-system/">Package system</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../packages/builtin/">Builtin</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../packages/use-statement/">Using a package</a>
                    
                </li>
            
        

    
        
            <li class="toctree-l1 ">
                <a class="" href="../../composition-inheritance/code-sharing/">Composition vs. inheritance</a>
                
            </li>
        

    
        
            <span>Generics</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../generics/polymorphic-types/">Polymorphic types</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../generics/polymorphic-methods/">Polymorphic methods</a>
                    
                </li>
            
        

    
        
            <span>Pattern matching</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../pattern-matching/match/">match-expression</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../pattern-matching/as/">as-expression</a>
                    
                </li>
            
        

    
        
            <span>Platform</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../platform/platform/">Platform</a>
                    
                </li>
            
        

    
        
            <span>Editor support</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../editor-plugins/plugins/">Plugins</a>
                    
                </li>
            
        

    
        
            <span>Compiler options</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../compiler-clargs/clargs/">Overview</a>
                    
                </li>
            
        

    
        
            <span>Patterns</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../patterns/patterns/">Patterns</a>
                    
                </li>
            
        

    
        
            <span>Garbage collection</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../garbage-collection/garbage-collection/">Garbage collection</a>
                    
                </li>
            
        

    
        
            <span>C-FFI</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../c-ffi/calling-c/">Calling C programs</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../c-ffi/linking-c/">Linking to C libraries</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../c-ffi/c-abi/">Exposing a C-ABI</a>
                    
                </li>
            
        

    
        
            <span>Examples</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../examples/examples/">Examples</a>
                    
                </li>
            
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Pony Tutorial</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        <li>Capabilities &raquo;</li>
      
    
    <li>Guarantees</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <p>Since types are guarantees, it's useful to talk about what guarantees a capability makes.</p>
<h1 id="what-is-denied">What is denied</h1>
<p>We're going to talk about capability guarantees in terms of what's <em>denied</em>. By this, we mean: what can other variables <em>not</em> do when you have a variable with a certain capability?</p>
<p>We need to distinguish between the actor that contains the variable in question and <em>other</em> actors.</p>
<p>This is important because data reads and writes from other actors may occur concurrently. If two actors can both read the same data and one of them changes it then it will change under the feet of the other actor. This leads to data-races and the need for locks. By ensuring this situation can never occur Pony eliminates the need for locks.</p>
<p>All code within any one actor always executes sequentially. This means that data accesses from multiple variables within a single actor do not suffer from data-races.</p>
<h1 id="mutable-capabilities">Mutable capabilities</h1>
<p>The <strong>mutable</strong> capabilities are <code>iso</code>, <code>trn</code> and <code>ref</code>. These capabilities are <strong>mutable</strong> because they can be used to both read from and write to an object.</p>
<ul>
<li>If an actor has an <code>iso</code> variable, no other variable can be used by <em>any</em> actor to read from or write to that object. This means an <code>iso</code> variable is the only variable anywhere in the program that can read from or write to that object. It is <em>read and write unique</em>.</li>
<li>If an actor has a <code>trn</code> variable, no other variable can be used by <em>any</em> actor to write to that object, and no other variable can be used by <em>other</em> actors to read from or write to that object. This means a <code>trn</code> variable is the only variable anywhere in the program that can write to that object, but other variables held by the the same actor may be able to read from it. It is <em>write unique</em>.</li>
<li>If an actor has a <code>ref</code> variable, no other variable can be used by <em>other</em> actors to read from or write to that object. This means that other variables can be used to read from and write to the object, but only from within the same actor.</li>
</ul>
<p><strong>Why can they be used to write?</strong> Because they all stop <em>other</em> actors from reading from or writing to the object. Since we know no other actor will be reading, it's safe for us to write to the object, without having to worry about data-races. And since we know no other actor will be writing, it's safe for us to read from the object, too.</p>
<h1 id="immutable-capabilities">Immutable capabilities</h1>
<p>The <strong>immutable</strong> capabilities are <code>val</code> and <code>box</code>. These capabilities are <strong>immutable</strong> because they can be used to read from an object, but not to write to it.</p>
<ul>
<li>If an actor has a <code>val</code> variable, no other variable can be used by <em>any</em> actor to write to that object. This means that the object can't <em>ever</em> change. It is <em>globally immutable</em>.</li>
<li>If an actor has a <code>box</code> variable, no other variable can be used by <em>other</em> actors to write to that object. This means that other actors may be able to read the object and other variables in the same actor may be able to write to it (although not both). In either case it is safe for us to read. The object is <em>locally immutable</em>.</li>
</ul>
<p><strong>Why can they be used to read but not write?</strong> Because these capabilities only stop <em>other</em> actors from writing to the object. That means there is no guarantee that <em>other</em> actors aren't reading from the object, which means it's not safe for us to write to it. It's safe for more than one actor to read from an object at the same time though, so we're allowed to do that.</p>
<h1 id="opaque-capabilities">Opaque capabilities</h1>
<p>There's only one <strong>opaque</strong> capability, which is <code>tag</code>. A <code>tag</code> variable makes no guarantees about other variables at all. As a result, it can't be used to either read from or write to the object.</p>
<p>It's still useful though: you can do identity comparison with it, you can call behaviours on it, and you can call functions on it that only need a <code>tag</code> receiver.</p>
<p><strong>Why can't <code>tag</code> be used to read or write?</strong> Because <code>tag</code> doesn't stop <em>other</em> actors from writing to the object. That means if we tried to read, we would have no guarantee that there wasn't some other actor writing to the object, so we might get a race condition.</p>
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../aliasing/" class="btn btn-neutral float-right" title="Aliasing"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../introduction/" class="btn btn-neutral" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
      <span><a href="../introduction/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="../aliasing/" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>

<!--
MkDocs version  : 0.12.2
Docs Build Date : 2015-05-25 11:10:06.119111
-->
</body>
</html>