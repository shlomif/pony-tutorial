<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Methods - Pony Tutorial</title>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/theme_extra.css" rel="stylesheet">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>

  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
  </style> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Pony Tutorial</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
        <span>Installation</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../installation/mac-osx">Mac OSX</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../installation/linux">Linux</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../installation/windows">Windows</a>
                    
                </li>
            
        

    
        
        <span>Getting started</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../getting-started/what-you-need-to-start">What you need to start</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../getting-started/helloworld">Helloworld</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../getting-started/how-it-works">How it works</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../getting-started/whitespace">Whitespace</a>
                    
                </li>
            
        

    
        
        <span>Types</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../types/static-vs-dynamic">Static vs dynamic</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../types/classes">Classes</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../types/primitives">Primitives</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../types/actors">Actors</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../types/traits-and-interfaces">Traits and interfaces</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../types/type-aliases">Type aliases</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../types/type-expressions">Type expressions</a>
                    
                </li>
            
        

    
        
        <span>Capabilities</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../capabilities/type-qualifiers">Type qualifiers</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../capabilities/guarantees">Guarantees</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../capabilities/aliasing">Aliasing</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../capabilities/combining-capabilities">Combining capabilities</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../capabilities/passing-and-sharing">Passing and sharing</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../capabilities/capability-subtyping">Capability subtyping</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../capabilities/arrow-types">Arrow types</a>
                    
                </li>
            
        

    
        
        <span>Expressions</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../variables">Variables</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../infix-ops">Infix ops</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../control-structures">Control structures</a>
                    
                </li>
            
                <li class="toctree-l1 current">
                    <a class="current" href=".">Methods</a>
                    
                        <ul>
                        
                            <li class="toctree-l2"><a href="#functions">Functions</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#constructors">Constructors</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#calling">Calling</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#default-arguments">Default arguments</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#named-arguments">Named arguments</a></li>
                            
                        
                            <li class="toctree-l2"><a href="#privacy">Privacy</a></li>
                            
                        
                        </ul>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../exceptions">Exceptions</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../sugar">Sugar</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../object-literals">Object literals</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../partial-application">Partial application</a>
                    
                </li>
            
        

    
        
        <span>Actors</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../actors/behaviours">Behaviours</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../actors/capabilities">Capabilities</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../actors/recover-and-consume">recover and consume</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../actors/arrow-types">Arrow types</a>
                    
                </li>
            
        

    
        
        <span>Packages</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../packages/package-system">Package system</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../packages/builtin">Builtin</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../packages/use-statement">Using a package</a>
                    
                </li>
            
        

    
        
        <span>Composition vs. inheritance</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../composition-inheritance/code-sharing">Code sharing</a>
                    
                </li>
            
        

    
        
        <span>Generics</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../generics/polymorphic-types">Polymorphic types</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../generics/polymorphic-methods">Polymorphic methods</a>
                    
                </li>
            
        

    
        
        <span>Pattern matching</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../pattern-matching/match">match-expression</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../pattern-matching/as">as-expression</a>
                    
                </li>
            
        

    
        
        <span>Platform</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../platform/platform">Platform</a>
                    
                </li>
            
        

    
        
        <span>Editor support</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../editor-plugins/plugins">Plugins</a>
                    
                </li>
            
        

    
        
        <span>Compiler options</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../compiler-clargs/clargs">Overview</a>
                    
                </li>
            
        

    
        
        <span>Patterns</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../patterns/patterns">Patterns</a>
                    
                </li>
            
        

    
        
        <span>Garbage collection</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../garbage-collection/garbage-collection">Garbage collection</a>
                    
                </li>
            
        

    
        
        <span>C-FFI</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../c-ffi/calling-c">Calling C programs</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../c-ffi/linking-c">Linking to C libraries</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../c-ffi/c-abi">Exposing a C-ABI</a>
                    
                </li>
            
        

    
        
        <span>Examples</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../examples/examples">Examples</a>
                    
                </li>
            
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="../.."></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    <li>Methods</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <p>All Pony code that actually does something, rather than defining types etc, appears in named blocks which are referred to as methods. There are three kinds of methods; functions, constructors and behaviours. All methods are attached to type definitions (e.g. classes), there are no global functions.</p>
<p>Behaviours are used for handling asynchronous messages sent to actors. We'll look at those later.</p>
<p><strong>Can I have some code outside of any methods, like I do in Python?</strong> No. All Pony code must be within a method.</p>
<h1 id="functions">Functions</h1>
<p>Pony functions are quite like functions (or methods) in other languages. They can have 0 or more parameters and 0 or 1 return values.</p>
<pre><code>class C
  fun add(x: U32, y: U32): U32 =&gt;
    x + y

  fun nop() =&gt;
    add(1, 2)  // Pointless, we ignore the result
</code></pre>

<p>The function parameters (if any) are specified in parentheses after the function name. Functions that don't take any parameters still need to have the parentheses.</p>
<p>Each parameter is given a name and a type. In our example function <code>add</code> has 2 parameters, <code>x</code> and <code>y</code>, both of which are type <code>U32</code>. The values passed to a function call (the <code>1</code> and <code>2</code> in our example) are called arguments and when the call is made they are evaluated and assigned to the parameters. Parameters may not assigned to within the function, they are effectively declared <code>let</code>.</p>
<p>After the parameters comes the return type. If nothing will be returned this is simply omitted.</p>
<p>After the return value there's a <code>=&gt;</code> and then finally the function body. The value returned is simply the value of the function body (remember that everything is an expression), which is simply the value of the last command in the function.</p>
<p>If you want to exit a function early then use the <code>return</code> command. If the function has a return type then you need to provide a value to return. If the function does not have a return type then <code>return</code> should appear on its own, without a value.</p>
<pre><code>class C
  fun factorial(x: U32): U32 =&gt;
    if x == 0 then
      return 0
    end

    x * factorial(x - 1)
</code></pre>

<p><strong>Can I overload functions by argument type?</strong> No. There is no overloading of methods in Pony, each type may only have a single method of any given name.</p>
<h1 id="constructors">Constructors</h1>
<p>Pony constructors are used to initialise newly created objects, as in many languages. However, unlike many languages, Pony constructors are named so you can have as many as you like, taking whatever parameters you like. By convention the main constructor of each type (if there is such a thing for any given type) is called <code>create</code>.</p>
<pre><code>class Foo
  var _x: U32

  new create() =&gt;
    _x = 0

  new from_int(x: U32) =&gt;
    _x = x
</code></pre>

<p>The purpose of a constructor is to set up the internal state of the object being created. To ensure this is done constructors must initialise all the fields in the object being constructed.</p>
<p><strong>Can I exit a constructor early?</strong> Yes. Just then use the <code>return</code> command without a value. The object must already be in a legal state to do this.</p>
<h1 id="calling">Calling</h1>
<p>As in many other langauages methods in Pony are called by providing the arguments within parentheses after the method name. The parentheses are required even if there are no arguments being passed to the method.</p>
<pre><code>class Foo
  fun hello(name: string): String =&gt;
    &quot;hello &quot; + name

  fun f() =&gt;
    string a = hello(&quot;Fred&quot;)
</code></pre>

<p>Constructors are usually called "on" a type, by specifying the type that is to be created. To do this just specify the type, followed by a dot, followed by the name of the constructor you want to call.</p>
<pre><code>class Foo
  var _x: U32

  new create() =&gt;
    _x = 0

  new from_int(x: U32) =&gt;
    _x = x

class Bar
  fun f() =&gt;
    var a: Foo = Foo.create()
    var b: Foo = Foo.from_int(3)
</code></pre>

<p>Functions are always called on an object. Again just specify the object, followed by a dot followed, by the name of the function to call. If the object to call on is omitted then the current object used (i.e. <code>this</code>).</p>
<pre><code>class Foo
  var _x: U32

  new create() =&gt;
    _x = 0

  new from_int(x: U32) =&gt;
    _x = x

  fun get(): U32 =&gt;
    _x

class Bar
  fun f() =&gt;
    var a: Foo = Foo.from_int(3)
    var b: U32 = a.get()
    var c: U32 = g(b)

  fun g(x: U32): U32 =&gt;
    x + 1

</code></pre>

<p>Constructors can also be called on an expression. Here an object is created of the same type as the specified expression, this is equivalent to directly specifying the type.</p>
<pre><code>class Foo
  var _x: U32

  new create() =&gt;
    _x = 0

  new from_int(x: U32) =&gt;
    _x = x

class Bar
  fun f() =&gt;
    var a: Foo = Foo.create()
    var b: Foo = a.from_int(3)
</code></pre>

<h1 id="default-arguments">Default arguments</h1>
<p>When defining a method you can provide default values for any of the arguments. The caller then has the choice to use the values you have provided or to provide their own. Default argument values are specified with a <code>=</code> after the parameter name.</p>
<pre><code>class Coord
  var _x: U32
  var _y: U32

  new create(x: U32 = 0, y: U32 = 0) =&gt;
    _x = x
    _y = y

class Bar
  fun f() =&gt;
    var a: Foo = Coord.create()     // Contains (0, 0)
    var b: Foo = Coord.create(3)    // Contains (3, 0)
    var b: Foo = Coord.create(3, 4) // Contains (3, 4)
</code></pre>

<p><strong>Do I have to provide default values for all of my arguments?</strong> No, you can provide defaults for as many, or as few, as you like.</p>
<h1 id="named-arguments">Named arguments</h1>
<p>So far, when calling methods we have always given all the arguments in order. This is known as using <strong>positional</strong> arguments. However, you can also specify the arguments in any order you like by specifying their names. This is known as using <strong>named</strong> arguments.</p>
<p>To call a method using named arguments use the <code>where</code> keyword, followed by the named arguments and their values.</p>
<pre><code>class Coord
  var _x: U32
  var _y: U32

  new create(x: U32 = 0, y: U32 = 0) =&gt;
    _x = x
    _y = y

class Bar
  fun f() =&gt;
    var a: Foo = Coord.create(where y = 4, x = 3)
</code></pre>

<p><strong>Should I specify <code>where</code> for each named argument?</strong> No. There must only be one <code>where</code> in each method call.</p>
<p>Named and positional arguments can be used together in a single call. Just start with the positional arguments you want to specify, then a <code>where</code> and finally the named arguments. But be careful, each argument must be specified only once.</p>
<p>Default arguments can also be used in combination with positional and named arguments, just miss out any for which you want to use the default.</p>
<pre><code>class Foo
  fun f(a:U32 = 1, b: U32 = 2, c: U32 = 3, d: U32 = 4, e: U32 = 5) =&gt;
    0

  fun g() =&gt;
    f(6, 7 where d = 8)
    // Equivalent to:
    f(6, 7, 3, 8, 5)
</code></pre>

<p><strong>Can I call using positional arguments but miss out the first one?</strong> No. If you use positional arguments they must be the first ones in the call.</p>
<h1 id="privacy">Privacy</h1>
<p>In Pony method names start either with a lower case letter or with an underscore followed by a lower case letter. Methods with a leading underscore are private. This means they can only be called by code within the same package. Methods without a leading underscore are public and can be called by anyone.</p>
<p><strong>Can I start my method name with 2 (or more) underscores?</strong> No. If the first character is an underscore then the second one MUST be a lower case letter.</p>

            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../exceptions" class="btn btn-neutral float-right" title="Exceptions"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../control-structures" class="btn btn-neutral" title="Control structures"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
      <span><a href="../control-structures" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="../exceptions" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>
</body>
</html>