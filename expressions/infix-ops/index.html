<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Infix ops - Pony Tutorial</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/highlight.css" rel="stylesheet">
  <link href="../../css/theme_extra.css" rel="stylesheet">

  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/highlight.pack.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Pony Tutorial</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
            <li class="toctree-l1 ">
                <a class="" href="../..">Home</a>
                
            </li>
        

    
        
            <span>Getting started</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../..">Welcome!</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../getting-started/what-you-need-to-start/">What you need to start</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../getting-started/installation/">Installation</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../getting-started/helloworld/">Helloworld</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../getting-started/how-it-works/">How it works</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../getting-started/whitespace/">Whitespace</a>
                    
                </li>
            
        

    
        
            <span>Types</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/static-vs-dynamic/">Static vs dynamic</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/classes/">Classes</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/primitives/">Primitives</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/actors/">Actors</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/traits-and-interfaces/">Traits and interfaces</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/type-aliases/">Type aliases</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../types/type-expressions/">Type expressions</a>
                    
                </li>
            
        

    
        
            <span>Capabilities</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../capabilities/introduction/">Introduction</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../capabilities/guarantees/">Guarantees</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../capabilities/aliasing/">Aliasing</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../capabilities/combining-capabilities/">Combining capabilities</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../capabilities/passing-and-sharing/">Passing and sharing</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../capabilities/capability-subtyping/">Capability subtyping</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../capabilities/arrow-types/">Arrow types</a>
                    
                </li>
            
        

    
        
            <span>Expressions</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../variables/">Variables</a>
                    
                </li>
            
                <li class="toctree-l2 current">
                    <a class="current" href="./">Infix ops</a>
                    
                        <ul>
                        
                            <li class="toctree-l3"><a href="#precedence">Precedence</a></li>
                            
                        
                            <li class="toctree-l3"><a href="#operator-aliasing">Operator aliasing</a></li>
                            
                        
                            <li class="toctree-l3"><a href="#short-circuiting">Short circuiting</a></li>
                            
                        
                            <li class="toctree-l3"><a href="#unary-operators">Unary operators</a></li>
                            
                        
                        </ul>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../control-structures/">Control structures</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../methods/">Methods</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../exceptions/">Exceptions</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../sugar/">Sugar</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../object-literals/">Object literals</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../partial-application/">Partial application</a>
                    
                </li>
            
        

    
        
            <span>Actors</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../actors/behaviours/">Behaviours</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../actors/capabilities/">Capabilities</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../actors/recover-and-consume/">recover and consume</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../actors/arrow-types/">Arrow types</a>
                    
                </li>
            
        

    
        
            <span>Packages</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../packages/package-system/">Package system</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../packages/builtin/">Builtin</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../packages/use-statement/">Using a package</a>
                    
                </li>
            
        

    
        
            <li class="toctree-l1 ">
                <a class="" href="../../composition-inheritance/code-sharing/">Composition vs. inheritance</a>
                
            </li>
        

    
        
            <span>Generics</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../generics/polymorphic-types/">Polymorphic types</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../generics/polymorphic-methods/">Polymorphic methods</a>
                    
                </li>
            
        

    
        
            <span>Pattern matching</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../pattern-matching/match/">match-expression</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../pattern-matching/as/">as-expression</a>
                    
                </li>
            
        

    
        
            <span>Platform</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../platform/platform/">Platform</a>
                    
                </li>
            
        

    
        
            <span>Editor support</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../editor-plugins/plugins/">Plugins</a>
                    
                </li>
            
        

    
        
            <span>Compiler options</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../compiler-clargs/clargs/">Overview</a>
                    
                </li>
            
        

    
        
            <span>Patterns</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../patterns/patterns/">Patterns</a>
                    
                </li>
            
        

    
        
            <span>Garbage collection</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../garbage-collection/garbage-collection/">Garbage collection</a>
                    
                </li>
            
        

    
        
            <span>C-FFI</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../c-ffi/calling-c/">Calling C programs</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../c-ffi/linking-c/">Linking to C libraries</a>
                    
                </li>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../c-ffi/c-abi/">Exposing a C-ABI</a>
                    
                </li>
            
        

    
        
            <span>Examples</span>
            
                <li class="toctree-l2 ">
                    <a class="" href="../../examples/examples/">Examples</a>
                    
                </li>
            
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Pony Tutorial</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        <li>Expressions &raquo;</li>
      
    
    <li>Infix ops</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <p>Infix operators take two operands and are written between those operands. Arithmetic and comparison operators are the most common:</p>
<pre><code class="pony">1 + 2
a &lt; b
</code></pre>

<p>Pony has pretty much the same set of infix operators as other langauges.</p>
<h1 id="precedence">Precedence</h1>
<p>When using infix operators in complex expressions a key question is the <strong>precedence</strong>, i.e. which operator is evaluated first. Given this expression:</p>
<pre><code class="pony">1 + 2 * 3
</code></pre>

<p>We will get a value of 9 if we evaluate the addition first and 7 if we evaluate the multiplication first. In mathematics there are rules about the order in which to evaluate operators and most programming languages follow this approach.</p>
<p>The problem with this is that the programmer has to remember the order and people aren't very good at things like that. Most people will remember to do multiplication before addition, but what about left bit shifting versus bitwise and? Sometimes people misremember (or guess wrong) and that leads to bugs. Worse, those bugs are often very hard to spot.</p>
<p>Pony takes a different approach and outlaws infix precedence. Any expression where more than one infix operator is used <strong>must</strong> use parentheses to remove the ambiguity. If you failure to do this the compiler will complain.</p>
<p>This means that the example above is illegal in Pony and should be rewritten as:</p>
<pre><code class="pony">1 + (2 * 3)
</code></pre>

<p>Repeated use of a single operator however is fine:</p>
<pre><code class="pony">1 + 2 + 3
</code></pre>

<h1 id="operator-aliasing">Operator aliasing</h1>
<p>Most infix operators in Pony are actually aliases for functions. The left operand is the receiver the function is called on and the right operand is passed as an argument. For example the following expressions are equivalent:</p>
<pre><code class="pony">x + y
x.add(y)
</code></pre>

<p>This means that <code>+</code> is not a special symbol that can only be applied to magic types. Any type can provide its own <code>add</code> function and the programmer can then use <code>+</code> with that type, if they want to.</p>
<p>When defining your own <code>add</code> function there is no restriction on the types of the parameter or the return type. The right side of the <code>+</code> will have to match the parameter type and the whole <code>+</code> expression will have the type that <code>add</code> returns.</p>
<p>Here's a full example for defining a type which allows use of <code>+</code>. This is all you need:</p>
<pre><code class="pony">// Define a suitable type
class Pair
  var _x: U32 = 0
  var _y: U32 = 0

  new create(x: U32, y: U32) =&gt;
    _x = x
    _y = y

  // Define a + function
  fun add(other: Pair): Pair =&gt;
    Pair(_x + other._x, _y + other._y)

// Now let's use it
class Foo
  fun foo() =&gt;
    var x = Pair(1, 2)
    var y = Pair(3, 4)
    var z = x + y
</code></pre>

<p>Since Pony does not allow overloading of functions by argument type, each type can only have a single <code>add</code> function. It is possible to overload infix operators to some degree using union types or f-bounded polymorphism, but this is beyond the scope of this tutorial. See the Pony standard library for further information.</p>
<p>You do not have to worry about any of this if you don't want to. You can simply use the existing infix operators for numbers just like any other language and not provide them for your own types.</p>
<p>The full list of infix operators that are aliases for functions is:</p>
<hr />
<table>
<thead>
<tr>
<th>Operator</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>add()</td>
<td>Addition</td>
</tr>
<tr>
<td>-</td>
<td>sub()</td>
<td>Subtraction</td>
</tr>
<tr>
<td>*</td>
<td>mul()</td>
<td>Multiplication</td>
</tr>
<tr>
<td>/</td>
<td>div()</td>
<td>Division</td>
</tr>
<tr>
<td>%</td>
<td>mod()</td>
<td>Modulus</td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>shl()</td>
<td>Left bit shift</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>shr()</td>
<td>Right bit shift</td>
</tr>
<tr>
<td>and</td>
<td>op_and()</td>
<td>And, both bitwise and logical</td>
</tr>
<tr>
<td>or</td>
<td>op_or()</td>
<td>Or, both bitwise and logical</td>
</tr>
<tr>
<td>xor</td>
<td>op_xor()</td>
<td>Xor, both bitwise and logical</td>
</tr>
<tr>
<td>==</td>
<td>eq()</td>
<td>Equality</td>
</tr>
<tr>
<td>!=</td>
<td>ne()</td>
<td>Non-equality</td>
</tr>
<tr>
<td>&lt;</td>
<td>lt()</td>
<td>Less then</td>
</tr>
<tr>
<td>&lt;=</td>
<td>le()</td>
<td>Less than or equal</td>
</tr>
<tr>
<td>&gt;=</td>
<td>ge()</td>
<td>Greater than or equal</td>
</tr>
<tr>
<td>&gt;</td>
<td>gt()</td>
<td>Greater than</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="short-circuiting">Short circuiting</h1>
<p>The <code>and</code> and <code>or</code> operators use <strong>short circuiting</strong> when used with Bool operators. This means that the first operand is always evaluated, but the second is only evaluated if it can affect the result.</p>
<p>For <code>and</code>, if the first operand is <strong>false</strong> then the second operand is not evaluated, since it cannot affect the result.</p>
<p>For <code>or</code>, if the first operand is <strong>true</strong> then the second operand is not evaluated, since it cannot affect the result.</p>
<p>This is a special feature built into the compiler, it cannot be used with operator aliasing for any other type.</p>
<h1 id="unary-operators">Unary operators</h1>
<p>The unary operators are handled in the same manor, but with only one operand. For example the following expressions are equivalent:</p>
<pre><code class="pony">-x
x.neg()
</code></pre>

<p>The full list of unary operators that are aliases for functions is:</p>
<hr />
<table>
<thead>
<tr>
<th>Operator</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>neg()</td>
<td>Arithmetic negation</td>
</tr>
<tr>
<td>!</td>
<td>op_not()</td>
<td>Not, both bitwise and logical</td>
</tr>
</tbody>
</table>
<hr />
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../control-structures/" class="btn btn-neutral float-right" title="Control structures"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../variables/" class="btn btn-neutral" title="Variables"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
      <span><a href="../variables/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="../control-structures/" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>

<!--
MkDocs version  : 0.12.2
Docs Build Date : 2015-05-24 17:14:44.031684
-->
</body>
</html>